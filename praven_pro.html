<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praven Pro 2.2 - Automated Biological Validation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6; color: #e0e0e0;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            min-height: 100vh; padding: 20px;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        header {
            text-align: center; margin-bottom: 40px; padding: 40px 20px;
            background: rgba(255, 255, 255, 0.05); border-radius: 20px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-size: 3em; margin-bottom: 15px;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .subtitle { font-size: 1.3em; color: #a0a0a0; }

        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin: 30px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3); padding: 25px; border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 2.5em; font-weight: bold;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            margin-bottom: 10px;
        }

        .stat-label { color: #a0a0a0; font-size: 1em; }

        .section {
            background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 20px;
            margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h2 {
            font-size: 2.2em; margin-bottom: 25px; color: #00d4ff;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3); padding-bottom: 15px;
        }

        h3 { font-size: 1.6em; margin: 25px 0 15px; color: #7b2ff7; }

        .highlight-box {
            background: rgba(0, 0, 0, 0.3); padding: 25px; border-radius: 12px;
            margin: 20px 0; border-left: 4px solid #00d4ff;
        }

        .success-box {
            background: rgba(0, 255, 136, 0.1); padding: 25px; border-radius: 12px;
            margin: 20px 0; border-left: 4px solid #00ff88;
        }

        .code-box {
            background: rgba(0, 0, 0, 0.5); padding: 20px; border-radius: 8px;
            margin: 20px 0; font-family: 'Courier New', monospace;
            overflow-x: auto; font-size: 0.9em; color: #00ff88;
        }

        pre { margin: 0; white-space: pre-wrap; }

        ul { margin: 15px 0; padding-left: 30px; }
        li { margin: 10px 0; color: #d0d0d0; }

        .badge {
            display: inline-block; padding: 5px 12px; border-radius: 20px;
            font-size: 0.85em; margin: 5px 5px 0 0; font-weight: 500;
        }

        .badge-new { background: rgba(0, 255, 136, 0.2); color: #00ff88; border: 1px solid #00ff88; }
        .badge-github { background: rgba(123, 47, 247, 0.2); color: #7b2ff7; border: 1px solid #7b2ff7; }

        .detection-card {
            background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px;
            margin: 15px 0; border-left: 4px solid #ff8c00;
        }

        .detection-card h4 { color: #00d4ff; margin-bottom: 10px; font-size: 1.2em; }
        .detection-info { color: #d0d0d0; font-size: 0.95em; margin: 5px 0; }

        footer {
            text-align: center; margin-top: 60px; padding: 30px;
            color: #666; font-size: 0.9em;
        }

        a { color: #00d4ff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Global Navigation -->
        <nav style="background: rgba(255, 255, 255, 0.05); padding: 15px 30px; border-radius: 10px; margin-bottom: 30px; border: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
            <a href="index.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Home</a>
            <a href="species_gallery.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Species Gallery</a>
            <a href="behavioral_findings.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Behavioral Findings</a>
            <a href="field_report.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Field Report</a>
            <a href="verification_review.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Verification</a>
            <a href="praven_pro.html" style="color: #00d4ff; text-decoration: none; padding: 10px 20px; border-radius: 8px; background: rgba(0, 212, 255, 0.2); border: 1px solid #00d4ff; transition: all 0.3s ease; font-weight: 500;">Praven Pro 2.2</a>
            <a href="full_report.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Full Report</a>
        </nav>

        <header>
            <h1>Praven Pro 2.2</h1>
            <div class="subtitle">Automated Biological Validation</div>
            <div style="margin-top: 20px;">
                <span class="badge badge-new">NEW: v2.2</span>
                <span class="badge badge-github">Open Source</span>
            </div>
        </header>

        <!-- Performance Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">6,805</div>
                <div class="stat-label">Detections Processed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">6,202 ‚Üí 192</div>
                <div class="stat-label">Smart Review Selection</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">82.2%</div>
                <div class="stat-label">Species Pass Rate (74/90)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">Fully</div>
                <div class="stat-label">Automated</div>
            </div>
        </div>

        <!-- What is Praven Pro -->
        <section class="section">
            <h2>What is Praven Pro?</h2>
            <p style="color: #d0d0d0; margin-bottom: 20px;">
                <strong>Praven Pro</strong> is an open-source Python toolkit that bridges the gap between BirdNET automated bird sound recognition and
                Raven Pro bioacoustic analysis software. It streamlines the verification workflow for acoustic monitoring studies by:
            </p>
            <ul>
                <li><strong>Converting BirdNET detections</strong> to Raven Pro selection tables for expert review</li>
                <li><strong>Generating spectrograms</strong> with publication-quality rendering</li>
                <li><strong>Enhancing audio</strong> with Wiener filtering and HPSS noise reduction</li>
                <li><strong>Batch processing</strong> thousands of detections automatically</li>
                <li><strong>üÜï Automatic habitat detection</strong> from GPS using OpenStreetMap (v2.2)</li>
                <li><strong>üÜï Automatic weather fetching</strong> from historical weather APIs (v2.2)</li>
                <li><strong>üÜï Smart review selection</strong> - Top 3 per species for manual review (v2.2)</li>
                <li><strong>üÜï Biological validation</strong> to auto-reject impossible detections (v2.0+)</li>
            </ul>

            <div class="highlight-box">
                <h3>GitHub Repository</h3>
                <p style="color: #d0d0d0; margin-bottom: 10px;">
                    <a href="https://github.com/Ziforge/praven-pro" target="_blank" style="font-size: 1.1em;">
                        https://github.com/Ziforge/praven-pro
                    </a>
                </p>
                <p style="color: #a0a0a0; font-size: 0.9em;">
                    Non-Commercial License ‚Ä¢ Python 3.9+ ‚Ä¢ Cross-platform (Windows/Mac/Linux)
                </p>
                <p style="color: #d0d0d0; margin-top: 10px;">
                    <strong>üåê Live Demo:</strong> <a href="https://ziforge.github.io/praven-pro" target="_blank">https://ziforge.github.io/praven-pro</a>
                </p>
            </div>
        </section>

        <!-- New in 2.2 -->
        <section class="section">
            <h2>üÜï New in Version 2.2: Full Automation</h2>

            <div class="success-box">
                <h3>Completely Automated Workflow</h3>
                <p style="color: #d0d0d0; margin-bottom: 15px;">
                    Version 2.2 introduces <strong>complete automation</strong> requiring only CSV upload and GPS coordinates.
                    Everything else is detected automatically:
                </p>
                <ul>
                    <li><strong>Automatic date extraction:</strong> Reads from CSV columns (recording_date, absolute_timestamp) or filenames (YYYYMMDD pattern)</li>
                    <li><strong>Automatic habitat detection:</strong> OpenStreetMap Overpass API queries 1000m radius for land cover types and hybrid habitats</li>
                    <li><strong>Automatic weather fetching:</strong> Open-Meteo Historical Weather API retrieves temperature, precipitation, visibility, wind, and clouds</li>
                    <li><strong>Smart review selection:</strong> Top 3 highest-confidence detections per species (Gaulossen dataset: 6,202 ‚Üí 192 detections for manual review)</li>
                    <li><strong>Biological validation:</strong> Activity patterns, geographic constraints, seasonal timing, habitat requirements, vagrant flagging</li>
                </ul>
            </div>

            <h3>Gaulossen Dataset Results</h3>
            <div class="stats-grid">
                <div class="detection-card" style="border-left-color: #00ff88;">
                    <h4>‚úÖ 580 Accepted</h4>
                    <div class="detection-info">Expected species in correct time/place</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff4444;">
                    <h4>‚ùå 23 Rejected</h4>
                    <div class="detection-info">Biological impossibilities auto-rejected</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff8c00;">
                    <h4>‚ö†Ô∏è 6,202 Review</h4>
                    <div class="detection-info">Smart review selected 192 detections for manual verification</div>
                </div>
            </div>

            <h3>Three-Way Classification System</h3>
            <div class="stats-grid">
                <div class="detection-card" style="border-left-color: #00ff88;">
                    <h4>‚úÖ Auto-Accept</h4>
                    <div class="detection-info">Expected species in correct time/place</div>
                    <div class="detection-info">Still requires audio quality verification</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff8c00;">
                    <h4>‚ö†Ô∏è Flag for Review</h4>
                    <div class="detection-info">Rare/vagrant species or low confidence</div>
                    <div class="detection-info">Requires expert manual verification</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff4444;">
                    <h4>‚ùå Auto-Reject</h4>
                    <div class="detection-info">Biological impossibilities</div>
                    <div class="detection-info">Nocturnal woodpeckers, wrong season, etc.</div>
                </div>
            </div>
        </section>

        <!-- Real-World Performance -->
        <section class="section">
            <h2>Real-World Performance: Gaulosen Study</h2>

            <p style="color: #d0d0d0; margin-bottom: 20px;">
                We tested the biological validator on the complete Gaulosen dataset (82 species, 4,108 detections).
                The validator was run <strong>after manual expert review</strong> to evaluate its effectiveness.
            </p>

            <h3>Errors Found by Biological Validator</h3>

            <div class="detection-card">
                <h4>Black Woodpecker (Dryocopus martius)</h4>
                <div class="detection-info">‚ùå Rejected: 2 nocturnal detections (01:35, 02:18)</div>
                <div class="detection-info">üìö Literature: No evidence of nocturnal calling behavior</div>
                <div class="detection-info">üîç Missed by: Manual expert review</div>
            </div>

            <div class="detection-card">
                <h4>Common Grasshopper-Warbler (Locustella naevia)</h4>
                <div class="detection-info">‚ùå Rejected: All 59 detections (October 13-15)</div>
                <div class="detection-info">üìö Literature: Summer visitor, departs by late September</div>
                <div class="detection-info">üîç Missed by: Manual expert review</div>
                <div class="detection-info">üí° Additional evidence: Spectrograms showed rain noise, not bird vocalizations</div>
            </div>

            <div class="detection-card">
                <h4>Corn Crake (Crex crex)</h4>
                <div class="detection-info">‚ùå Rejected: 1 detection (October 14, 18:47)</div>
                <div class="detection-info">üìö Literature: Long-distance migrant, should be in Africa by mid-October</div>
                <div class="detection-info">üîç Missed by: Manual expert review</div>
            </div>

            <div class="success-box">
                <h3>Validation Summary</h3>
                <p style="color: #d0d0d0; margin-bottom: 10px;">
                    <strong>Result:</strong> Biological validator successfully identified all 8 biologically implausible species
                    (5 from manual review + 3 newly discovered) based on temporal, habitat, and geographic constraints.
                </p>
                <p style="color: #d0d0d0;">
                    <strong>Impact:</strong> Species count corrected from 77 ‚Üí 74 verified species, improving scientific accuracy of the study.
                </p>
            </div>
        </section>

        <!-- Quick Start -->
        <section class="section">
            <h2>Quick Start Example</h2>

            <p style="color: #d0d0d0; margin-bottom: 20px;">
                Install and validate your BirdNET detections in under 2 minutes - everything is automatic:
            </p>

            <h3>CLI Usage (Recommended)</h3>
            <div class="code-box">
<pre># Install Praven Pro
pip install -r requirements.txt

# Validate - just provide CSV and GPS coordinates
# Everything else (date, weather, habitat) is detected automatically!
python validate.py gaulossen_all_detections.csv --lat 63.341 --lon 10.215

# Output:
# ‚úÖ CSV date extraction: 2025-10-13 from recording_date column
# ‚úÖ Habitat auto-detection: grassland (39%), oceanic (23%), wetland (16%)
# ‚úÖ Weather auto-fetching: -18.9¬∞C, rain 0.00, fog 0.00
# ‚úÖ Processed: 6,805 detections
# ‚úÖ Validated: 580 accepted, 23 rejected, 6,202 review
# ‚úÖ Smart review: 192 detections selected for manual verification</pre>
            </div>

            <h3>Web Interface</h3>
            <div class="code-box">
<pre># Start web server
python web_app.py

# Open http://localhost:5001
# Upload CSV, enter GPS coordinates
# Download results with automatic habitat and weather data included!</pre>
            </div>

            <h3>Automatic Detection Features</h3>
            <p style="color: #d0d0d0; margin-bottom: 15px;">
                Version 2.2 eliminates manual data entry through intelligent automation:
            </p>
            <ul>
                <li><strong>Date extraction:</strong> Reads recording_date, absolute_timestamp columns or parses YYYYMMDD from filenames</li>
                <li><strong>Habitat detection:</strong> 1000m radius OpenStreetMap query identifies land cover (permanent caching)</li>
                <li><strong>Weather fetching:</strong> Historical weather API retrieves conditions normalized to 0-1 scale (30-day TTL caching)</li>
                <li><strong>Taxonomic validation:</strong> 40 bird families with species-specific rules for activity patterns and habitats</li>
                <li><strong>Smart review:</strong> Selects top 3 highest-confidence detections per species for manual review</li>
            </ul>
        </section>

        <!-- Impact on Gaulosen Study -->
        <section class="section">
            <h2>Impact on This Study</h2>

            <div class="highlight-box">
                <h3>Statistics Before vs. After Biological Validation</h3>
                <table style="width: 100%; border-collapse: collapse; color: #d0d0d0; margin-top: 15px;">
                    <thead>
                        <tr style="border-bottom: 2px solid rgba(0, 212, 255, 0.3);">
                            <th style="text-align: left; padding: 10px;">Metric</th>
                            <th style="text-align: right; padding: 10px;">Before</th>
                            <th style="text-align: right; padding: 10px;">After</th>
                            <th style="text-align: right; padding: 10px; color: #00d4ff;">Change</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Verified Species</td>
                            <td style="text-align: right; padding: 10px;">77</td>
                            <td style="text-align: right; padding: 10px;">74</td>
                            <td style="text-align: right; padding: 10px; color: #ff4444;">-3</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Verified Detections</td>
                            <td style="text-align: right; padding: 10px;">4,085</td>
                            <td style="text-align: right; padding: 10px;">4,023</td>
                            <td style="text-align: right; padding: 10px; color: #ff4444;">-62</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Rejected Species</td>
                            <td style="text-align: right; padding: 10px;">5</td>
                            <td style="text-align: right; padding: 10px;">8</td>
                            <td style="text-align: right; padding: 10px; color: #00ff88;">+3</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Species Pass Rate</td>
                            <td style="text-align: right; padding: 10px;">85.6%</td>
                            <td style="text-align: right; padding: 10px;">82.2%</td>
                            <td style="text-align: right; padding: 10px; color: #ff8c00;">-3.4%</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px;">Stage 2 Pass Rate</td>
                            <td style="text-align: right; padding: 10px;">93.9%</td>
                            <td style="text-align: right; padding: 10px;">90.2%</td>
                            <td style="text-align: right; padding: 10px; color: #ff8c00;">-3.7%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p style="color: #a0a0a0; font-style: italic; margin-top: 20px;">
                While the pass rate decreased slightly, this represents increased <strong>scientific accuracy</strong>.
                The three species removed were biological impossibilities that should never have been in the final dataset.
            </p>
        </section>

        <!-- Future Development -->
        <section class="section">
            <h2>Future Development Roadmap</h2>

            <div style="background: rgba(255, 193, 7, 0.1); border-left: 4px solid #ffc107; padding: 25px; border-radius: 12px; margin-bottom: 30px;">
                <h3 style="color: #f57c00; margin-bottom: 15px;">‚ö†Ô∏è Current Limitations</h3>
                <p style="color: #d0d0d0; line-height: 1.8; margin-bottom: 15px;">
                    Praven Pro 2.2 is a <strong>proof-of-concept system</strong> validated on a single wetland study (Gaulossen Nature Reserve, October 2025).
                    The system demonstrated practical utility for this specific dataset but has significant limitations:
                </p>
                <ul style="color: #d0d0d0; line-height: 1.8; margin-left: 20px;">
                    <li><strong>Limited species coverage:</strong> Only 40 bird families (primarily European species)</li>
                    <li><strong>Incomplete weather data:</strong> Temperature, precipitation, visibility, wind, clouds only - missing humidity, barometric pressure, snow/ice conditions</li>
                    <li><strong>Single habitat type:</strong> Tested only on wetlands, not validated for forests, grasslands, urban areas, or other ecosystems</li>
                    <li><strong>Limited geographic scope:</strong> Validated only in Norway (63¬∞N), untested across different latitudes, continents, and climate zones</li>
                    <li><strong>No call type validation:</strong> Cannot distinguish between song, flight calls, and alarm calls</li>
                    <li><strong>No seasonal migration models:</strong> Lacks comprehensive phenology databases for regional migration timing variations</li>
                    <li><strong>Peer review required:</strong> Validation methodology and biological rules need formal scientific peer review</li>
                </ul>
                <p style="color: #d0d0d0; line-height: 1.8; margin-top: 15px;">
                    <strong>Extensive development required</strong> for broader real-world deployment beyond proof-of-concept status.
                </p>
            </div>

            <h3>Planned Features for v2.3+</h3>
            <ul>
                <li><strong>Expanded species coverage:</strong> North American, Asian, and African species rules</li>
                <li><strong>Call type validation:</strong> Distinguish song vs. flight calls vs. alarm calls</li>
                <li><strong>Enhanced ML integration:</strong> Improved rare/vagrant probability prediction</li>
                <li><strong>Regional phenology:</strong> Migration timing varies by latitude (eBird data integration)</li>
                <li><strong>Confidence thresholds:</strong> Species-specific confidence requirements</li>
                <li><strong>Advanced habitat modeling:</strong> Integration with eBird occurrence data and elevation constraints</li>
                <li><strong>Multi-species validation:</strong> Check for biologically impossible co-occurrences</li>
            </ul>

            <h3>Community Contributions Welcome</h3>
            <p style="color: #d0d0d0; margin-top: 15px;">
                We're actively seeking contributors to help expand the species rules database and add regional validation rules.
                Visit the <a href="https://github.com/Ziforge/praven-pro/issues" target="_blank">GitHub Issues</a> page to participate in development discussions.
            </p>
        </section>

        <!-- Citation -->
        <section class="section">
            <h2>How to Cite</h2>

            <div class="code-box">
<pre>Redpath, G. (2025). Praven Pro: Automated Biological Validation Toolkit
for BirdNET Detections (Version 2.2). GitHub repository.
https://github.com/Ziforge/praven-pro
https://ziforge.github.io/praven-pro</pre>
            </div>
        </section>

        <footer>
            <p>Gaulosen Nature Reserve Acoustic Monitoring Study</p>
            <p>October 13-15, 2025 - Gaulosen Nature Reserve, Melhus, Tr√∏ndelag, Norway</p>
            <p>74 Verified Species | 4,023 Verified Detections | 82.2% Overall Pass Rate (74/90)</p>
            <p style="margin-top: 15px;">Powered by <a href="https://github.com/Ziforge/praven-pro" target="_blank">Praven Pro v2.2</a> - Open Source Bioacoustic Analysis</p>
        </footer>
    </div>
</body>
</html>
