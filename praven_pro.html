<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praven Pro 2.0 - Biological Validation Module</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6; color: #e0e0e0;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            min-height: 100vh; padding: 20px;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        header {
            text-align: center; margin-bottom: 40px; padding: 40px 20px;
            background: rgba(255, 255, 255, 0.05); border-radius: 20px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-size: 3em; margin-bottom: 15px;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .subtitle { font-size: 1.3em; color: #a0a0a0; }

        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin: 30px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3); padding: 25px; border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 2.5em; font-weight: bold;
            background: linear-gradient(135deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            margin-bottom: 10px;
        }

        .stat-label { color: #a0a0a0; font-size: 1em; }

        .section {
            background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 20px;
            margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h2 {
            font-size: 2.2em; margin-bottom: 25px; color: #00d4ff;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3); padding-bottom: 15px;
        }

        h3 { font-size: 1.6em; margin: 25px 0 15px; color: #7b2ff7; }

        .highlight-box {
            background: rgba(0, 0, 0, 0.3); padding: 25px; border-radius: 12px;
            margin: 20px 0; border-left: 4px solid #00d4ff;
        }

        .success-box {
            background: rgba(0, 255, 136, 0.1); padding: 25px; border-radius: 12px;
            margin: 20px 0; border-left: 4px solid #00ff88;
        }

        .code-box {
            background: rgba(0, 0, 0, 0.5); padding: 20px; border-radius: 8px;
            margin: 20px 0; font-family: 'Courier New', monospace;
            overflow-x: auto; font-size: 0.9em; color: #00ff88;
        }

        pre { margin: 0; white-space: pre-wrap; }

        ul { margin: 15px 0; padding-left: 30px; }
        li { margin: 10px 0; color: #d0d0d0; }

        .badge {
            display: inline-block; padding: 5px 12px; border-radius: 20px;
            font-size: 0.85em; margin: 5px 5px 0 0; font-weight: 500;
        }

        .badge-new { background: rgba(0, 255, 136, 0.2); color: #00ff88; border: 1px solid #00ff88; }
        .badge-github { background: rgba(123, 47, 247, 0.2); color: #7b2ff7; border: 1px solid #7b2ff7; }

        .detection-card {
            background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px;
            margin: 15px 0; border-left: 4px solid #ff8c00;
        }

        .detection-card h4 { color: #00d4ff; margin-bottom: 10px; font-size: 1.2em; }
        .detection-info { color: #d0d0d0; font-size: 0.95em; margin: 5px 0; }

        footer {
            text-align: center; margin-top: 60px; padding: 30px;
            color: #666; font-size: 0.9em;
        }

        a { color: #00d4ff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Global Navigation -->
        <nav style="background: rgba(255, 255, 255, 0.05); padding: 15px 30px; border-radius: 10px; margin-bottom: 30px; border: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
            <a href="index.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Home</a>
            <a href="species_gallery.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Species Gallery</a>
            <a href="behavioral_findings.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Behavioral Findings</a>
            <a href="field_report.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Field Report</a>
            <a href="verification_review.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Verification</a>
            <a href="praven_pro.html" style="color: #00d4ff; text-decoration: none; padding: 10px 20px; border-radius: 8px; background: rgba(0, 212, 255, 0.2); border: 1px solid #00d4ff; transition: all 0.3s ease; font-weight: 500;">Praven Pro 2.0</a>
            <a href="full_report.html" style="color: #e0e0e0; text-decoration: none; padding: 10px 20px; border-radius: 8px; transition: all 0.3s ease;">Full Report</a>
        </nav>

        <header>
            <h1>Praven Pro 2.0</h1>
            <div class="subtitle">Biological Validation Module</div>
            <div style="margin-top: 20px;">
                <span class="badge badge-new">NEW: v2.0</span>
                <span class="badge badge-github">Open Source</span>
            </div>
        </header>

        <!-- Performance Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">Detection Rate on Known Errors</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">Additional Errors Found</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">0</div>
                <div class="stat-label">False Positives</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">8/82</div>
                <div class="stat-label">Species Correctly Rejected</div>
            </div>
        </div>

        <!-- What is Praven Pro -->
        <section class="section">
            <h2>What is Praven Pro?</h2>
            <p style="color: #d0d0d0; margin-bottom: 20px;">
                <strong>Praven Pro</strong> is an open-source Python toolkit that bridges the gap between BirdNET automated bird sound recognition and
                Raven Pro bioacoustic analysis software. It streamlines the verification workflow for acoustic monitoring studies by:
            </p>
            <ul>
                <li><strong>Converting BirdNET detections</strong> to Raven Pro selection tables for expert review</li>
                <li><strong>Generating spectrograms</strong> with publication-quality rendering</li>
                <li><strong>Enhancing audio</strong> with Wiener filtering and HPSS noise reduction</li>
                <li><strong>Batch processing</strong> thousands of detections automatically</li>
                <li><strong>🆕 Biological validation</strong> to auto-reject impossible detections (v2.0)</li>
            </ul>

            <div class="highlight-box">
                <h3>GitHub Repository</h3>
                <p style="color: #d0d0d0; margin-bottom: 10px;">
                    <a href="https://github.com/Ziforge/praven-pro" target="_blank" style="font-size: 1.1em;">
                        https://github.com/Ziforge/praven-pro
                    </a>
                </p>
                <p style="color: #a0a0a0; font-size: 0.9em;">
                    MIT License • Python 3.9+ • Cross-platform (Windows/Mac/Linux)
                </p>
            </div>
        </section>

        <!-- New in 2.0 -->
        <section class="section">
            <h2>🆕 New in Version 2.0: Biological Validation Module</h2>

            <div class="success-box">
                <h3>Automated Biological Plausibility Screening</h3>
                <p style="color: #d0d0d0; margin-bottom: 15px;">
                    Version 2.0 introduces <strong>automated biological validation</strong> that catches errors human reviewers can miss.
                    The system validates detections against ecological rules including:
                </p>
                <ul>
                    <li><strong>Activity patterns:</strong> Rejects nocturnal detections of strictly diurnal species</li>
                    <li><strong>Geographic constraints:</strong> Flags oceanic species detected inland</li>
                    <li><strong>Seasonal timing:</strong> Identifies impossible migration dates</li>
                    <li><strong>Habitat requirements:</strong> Detects species outside their range</li>
                    <li><strong>Vagrant flagging:</strong> Highlights rare/unlikely species for extra review</li>
                </ul>
            </div>

            <h3>Three-Way Classification System</h3>
            <div class="stats-grid">
                <div class="detection-card" style="border-left-color: #00ff88;">
                    <h4>✅ Auto-Accept</h4>
                    <div class="detection-info">Expected species in correct time/place</div>
                    <div class="detection-info">Still requires audio quality verification</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff8c00;">
                    <h4>⚠️ Flag for Review</h4>
                    <div class="detection-info">Rare/vagrant species or low confidence</div>
                    <div class="detection-info">Requires expert manual verification</div>
                </div>
                <div class="detection-card" style="border-left-color: #ff4444;">
                    <h4>❌ Auto-Reject</h4>
                    <div class="detection-info">Biological impossibilities</div>
                    <div class="detection-info">Nocturnal woodpeckers, wrong season, etc.</div>
                </div>
            </div>
        </section>

        <!-- Real-World Performance -->
        <section class="section">
            <h2>Real-World Performance: Gaulosen Study</h2>

            <p style="color: #d0d0d0; margin-bottom: 20px;">
                We tested the biological validator on the complete Gaulosen dataset (82 species, 4,108 detections).
                The validator was run <strong>after manual expert review</strong> to evaluate its effectiveness.
            </p>

            <h3>Errors Found by Biological Validator</h3>

            <div class="detection-card">
                <h4>Black Woodpecker (Dryocopus martius)</h4>
                <div class="detection-info">❌ Rejected: 2 nocturnal detections (01:35, 02:18)</div>
                <div class="detection-info">📚 Literature: No evidence of nocturnal calling behavior</div>
                <div class="detection-info">🔍 Missed by: Manual expert review</div>
            </div>

            <div class="detection-card">
                <h4>Common Grasshopper-Warbler (Locustella naevia)</h4>
                <div class="detection-info">❌ Rejected: All 59 detections (October 13-15)</div>
                <div class="detection-info">📚 Literature: Summer visitor, departs by late September</div>
                <div class="detection-info">🔍 Missed by: Manual expert review</div>
                <div class="detection-info">💡 Additional evidence: Spectrograms showed rain noise, not bird vocalizations</div>
            </div>

            <div class="detection-card">
                <h4>Corn Crake (Crex crex)</h4>
                <div class="detection-info">❌ Rejected: 1 detection (October 14, 18:47)</div>
                <div class="detection-info">📚 Literature: Long-distance migrant, should be in Africa by mid-October</div>
                <div class="detection-info">🔍 Missed by: Manual expert review</div>
            </div>

            <div class="success-box">
                <h3>Validation Summary</h3>
                <p style="color: #d0d0d0; margin-bottom: 10px;">
                    <strong>Result:</strong> Biological validator achieved <span style="color: #00ff88; font-weight: bold;">100% detection rate</span>
                    on all 8 biologically impossible species (5 from manual review + 3 newly discovered).
                </p>
                <p style="color: #d0d0d0; margin-bottom: 10px;">
                    <strong>False positives:</strong> <span style="color: #00ff88; font-weight: bold;">0</span>
                    (no valid species incorrectly rejected)
                </p>
                <p style="color: #d0d0d0;">
                    <strong>Impact:</strong> Species count corrected from 77 → 74 verified species, improving scientific accuracy of the study.
                </p>
            </div>
        </section>

        <!-- Quick Start -->
        <section class="section">
            <h2>Quick Start Example</h2>

            <p style="color: #d0d0d0; margin-bottom: 20px;">
                Install and validate your BirdNET detections in under 5 minutes:
            </p>

            <div class="code-box">
<pre># Install Praven Pro
pip install praven-pro

# Import biological validator
from praven_pro.biological_validator import BiologicalValidator
from datetime import datetime

# Initialize with European species rules
validator = BiologicalValidator(
    rules_file="praven_pro/species_rules/european_birds.json",
    location=(63.341, 10.215)  # Gaulosen coordinates
)

# Validate a detection
result = validator.validate_detection(
    species="Black Woodpecker",
    timestamp=datetime(2025, 10, 14, 1, 35),  # 01:35 AM
    location=(63.341, 10.215),
    confidence=0.87
)

print(result.action)  # AUTO_REJECT
print(result.reason)  # "Nocturnal detection of strictly diurnal species"</pre>
            </div>

            <h3>Species Rules Database</h3>
            <p style="color: #d0d0d0; margin-bottom: 15px;">
                The validator includes ecological rules for 41 European species, with plans to expand to:
            </p>
            <ul>
                <li>North American species (250+ species)</li>
                <li>Call type validation (song vs. flight calls)</li>
                <li>Regional phenology databases</li>
                <li>Elevation constraints</li>
                <li>Weather-based validation rules</li>
            </ul>
        </section>

        <!-- Impact on Gaulosen Study -->
        <section class="section">
            <h2>Impact on This Study</h2>

            <div class="highlight-box">
                <h3>Statistics Before vs. After Biological Validation</h3>
                <table style="width: 100%; border-collapse: collapse; color: #d0d0d0; margin-top: 15px;">
                    <thead>
                        <tr style="border-bottom: 2px solid rgba(0, 212, 255, 0.3);">
                            <th style="text-align: left; padding: 10px;">Metric</th>
                            <th style="text-align: right; padding: 10px;">Before</th>
                            <th style="text-align: right; padding: 10px;">After</th>
                            <th style="text-align: right; padding: 10px; color: #00d4ff;">Change</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Verified Species</td>
                            <td style="text-align: right; padding: 10px;">77</td>
                            <td style="text-align: right; padding: 10px;">74</td>
                            <td style="text-align: right; padding: 10px; color: #ff4444;">-3</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Verified Detections</td>
                            <td style="text-align: right; padding: 10px;">4,085</td>
                            <td style="text-align: right; padding: 10px;">4,023</td>
                            <td style="text-align: right; padding: 10px; color: #ff4444;">-62</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Rejected Species</td>
                            <td style="text-align: right; padding: 10px;">5</td>
                            <td style="text-align: right; padding: 10px;">8</td>
                            <td style="text-align: right; padding: 10px; color: #00ff88;">+3</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 10px;">Species Pass Rate</td>
                            <td style="text-align: right; padding: 10px;">85.6%</td>
                            <td style="text-align: right; padding: 10px;">82.2%</td>
                            <td style="text-align: right; padding: 10px; color: #ff8c00;">-3.4%</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px;">Stage 2 Pass Rate</td>
                            <td style="text-align: right; padding: 10px;">93.9%</td>
                            <td style="text-align: right; padding: 10px;">90.2%</td>
                            <td style="text-align: right; padding: 10px; color: #ff8c00;">-3.7%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p style="color: #a0a0a0; font-style: italic; margin-top: 20px;">
                While the pass rate decreased slightly, this represents increased <strong>scientific accuracy</strong>.
                The three species removed were biological impossibilities that should never have been in the final dataset.
            </p>
        </section>

        <!-- Future Development -->
        <section class="section">
            <h2>Future Development Roadmap</h2>

            <h3>Planned Features for v2.1+</h3>
            <ul>
                <li><strong>Expanded species coverage:</strong> North American, Asian, and African species rules</li>
                <li><strong>Call type validation:</strong> Distinguish song vs. flight calls vs. alarm calls</li>
                <li><strong>Machine learning integration:</strong> Predict rare/vagrant probability scores</li>
                <li><strong>Regional phenology:</strong> Migration timing varies by latitude</li>
                <li><strong>Confidence thresholds:</strong> Species-specific confidence requirements</li>
                <li><strong>Habitat modeling:</strong> Integration with eBird occurrence data</li>
                <li><strong>Multi-species validation:</strong> Check for biologically impossible co-occurrences</li>
            </ul>

            <h3>Community Contributions Welcome</h3>
            <p style="color: #d0d0d0; margin-top: 15px;">
                We're actively seeking contributors to help expand the species rules database and add regional validation rules.
                Visit the <a href="https://github.com/Ziforge/praven-pro/issues" target="_blank">GitHub Issues</a> page to participate in development discussions.
            </p>
        </section>

        <!-- Citation -->
        <section class="section">
            <h2>How to Cite</h2>

            <div class="code-box">
<pre>Redpath, G. (2025). Praven Pro: BirdNET to Raven Pro Conversion
Toolkit with Biological Validation (Version 2.0). GitHub repository.
https://github.com/Ziforge/praven-pro</pre>
            </div>
        </section>

        <footer>
            <p>Gaulosen Nature Reserve Acoustic Monitoring Study</p>
            <p>October 13-15, 2025 - Gaulosen Nature Reserve, Melhus, Trøndelag, Norway</p>
            <p>74 Verified Species | 4,023 Verified Detections | 90.2% Verification Rate</p>
            <p style="margin-top: 15px;">Powered by <a href="https://github.com/Ziforge/praven-pro" target="_blank">Praven Pro v2.0</a> - Open Source Bioacoustic Analysis</p>
        </footer>
    </div>
</body>
</html>
